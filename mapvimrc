map g<Space> g<C-]>
map g<Tab> g<S-Space><C-w>T
map g<S-Space> :split<CR>g<C-]>
map g<S-CR> :vsplit<CR>g<C-]>

map gh h^
map gl h$

map ga :Alternate<CR>

map <LEADER>3 \\\

map <LEADER>o :e<SPACE>
map <LEADER>n :n<SPACE>

"splitjoin
nmap <Leader>- :SplitjoinJoin<cr>
nmap <Leader>= :SplitjoinSplit<cr>
let g:splitjoin_ruby_curly_braces = 0

"Tab in visual mode
vmap <Tab> >gv
vmap <S-Tab> <gv

"why bother differenciate between j, k and gj, gk
map j gj
map k gk

"enter new line without insert mode
nmap <S-CR> i<CR><ESC>
nmap <BS> X

"edit mode keymap
imap <C-SPACE> <C-x><C-o>
imap <S-Tab> <C-o>
imap <silent> <ESC> <ESC>:w<CR>
vmap <silent> <ESC> <ESC>:w<CR>
smap <silent> <ESC> <ESC>:w<CR>

"close surrounding windows
map <LEADER>H <C-w>h:q<CR>
map <LEADER>J <C-w>j:q<CR>
map <LEADER>K <C-w>k:q<CR>
map <LEADER>L <C-w>l:q<CR>


nmap <Tab> :call NextBuffer()<CR>
nmap <S-Tab> :call PreviousBuffer()<CR>



"string to symbol"
map <LEADER>2s ds'i:<ESC>

"folding the block
nnoremap <silent> za :call ToggleFolding()<CR>

function! ToggleFolding()
  if foldclosed('.') == -1 && &foldmethod == 'manual'
    call feedkeys('zf%')
  else
    normal! za
  endif
endfunction

function! ToggleTagList()
  let current_win = winnr()
  execute ":TlistToggle"
  execute current_win . " wincmd w"
endfunction


map <LEADER>6 :call ToggleDisableEnableMiniBufExplorer()<CR>
omap <silent> ic <Plug>CamelCaseMotion_iw
xmap <silent> ic <Plug>CamelCaseMotion_iw

map gw :Utl<CR>
autocmd FileType ruby setlocal iskeyword+=?
autocmd FileType ruby setlocal iskeyword+=!

let g:LargeFile = 3

" fancy pants moving block
vnoremap , :m'>+<CR>gv=gv
vnoremap . :m-2<CR>gv=gv

map @@ @q

map <LEADER>e :call OpenFilesFromClipboard('e')<CR>

vmap <LEADER>nrw :Narrow<CR>
vmap <LEADER>wid :Widen<CR>

smap ' S'
smap " S"
vmap ' S'
vmap " S"

map <LEADER><LEADER> :CommandTFlush<CR>:CommandT<CR>
map <LEADER>W :TMiniBufExplorerCloseAllOthers<CR>
map <C-1> :call ToggleBetweenNERDTreeAndBufExplorer()<CR>
map <C-!> :call CloseNERDTreeAndBufExplorer()<CR>

" moving between window
nmap <C-h> <C-w>h
nmap <C-j> <C-w>j
nmap <C-k> <C-w>k
nmap <C-l> <C-w>l

" resize
map <C->> 5<C-w><
map <C-<> 5<C-w>>
map <C-_> 5<C-w>-
map <C-+> 5<C-w>+

map 0<LEADER> :MRU<CR><Down><CR>
" Macvim mapping
if has("gui_macvim")
  map  <D-s> <ESC>:wa<CR>
  vmap <D-s> <ESC>:w<CR>
  cmap <D-s> <ESC>:w<CR>
  omap <D-s> <ESC>:w<CR>
  imap <silent> <D-s> <ESC>:w<CR>

  map <D-w> :call CommandW()<CR>

  " move around window
  imap <D-a> <ESC>A
  imap <D-i> <ESC>I
  imap <D-h> <Left>
  imap <D-j> <Down>
  imap <D-k> <Up>
  imap <D-l> <Right>
  imap <D-w> <Right><ESC>wi
  imap <D-e> <Right><ESC>ea
  imap <D-b> <ESC>bi
  imap <D-d> <ESC>xi
  imap <D-x> <ESC>lxi

  "delete next and previous word in insert mode
  imap <D-[> <ESC>lvBxi
  imap <D-]> <ESC>lvExi

  "map scrolling
  map <D-h> g^
  map <D-l> g$
  map <D-j> <C-d>
  map <D-k> <C-u>

  map <D-P> $a<Space><ESC>p
  map <D-3> :call ToggleTagList()<CR>
  nmap <ESC> :w<CR>
  map <D-@> :call ToggleTransparency()<CR>
  imap <D-@> <ESC>:call ToggleTransparency()<CR>a
  nmap <RightMouse> :call ToggleBetweenNERDTreeAndBufExplorer()<CR>
  nmap <MiddleMouse> :call OpenFilesFromClipboard('e')<CR>
  map <D-!> :call CloseNERDTreeAndBufExplorer()<CR>
  map <D-1> :call ToggleBetweenNERDTreeAndBufExplorer()<CR>
endif
